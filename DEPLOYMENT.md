# IKIGAI X-ONE ‚Äî Deployment Guide

Private, single-user, AI-powered Ikigai discovery app.  
Choose **one** of the platforms below and follow the step-by-step instructions.

> IMPORTANT  
> ‚Äë App is protected via **HTTP Basic Auth**. Set `AUTH_USERNAME` + `AUTH_PASSWORD` in your platform‚Äôs secret manager before first deploy.  
> ‚Äë **OpenAI API key** (`OPENAI_API_KEY`) is mandatory.  
> ‚Äë All steps assume you already pushed the code to **GitHub `miscarriage87/IKIGAI`**.

---

## Shared Prerequisites

| Variable | Needed | Example |
|----------|--------|---------|
| `OPENAI_API_KEY` | ‚úÖ | `sk-...` |
| `AUTH_USERNAME`  | ‚úÖ | `birthday_user` |
| `AUTH_PASSWORD`  | ‚úÖ | `SuperSafe42!` |
| `SESSION_SECRET` | ‚úÖ | Random 32+ chars |
| `OPENAI_MODEL`   | ‚¨ú | `gpt-4o-mini` _(default)_ |
| `OPENAI_IMAGE_MODEL` | ‚¨ú | `dall-e-3` _(default)_ |

Copy `.env.example`, fill the values locally (for dev), **but never commit `.env`**.

---

## Option A ‚Äî Vercel (recommended ‚è± <5 min)

1. **Install CLI** (optional)  
   ```bash
   npm i -g vercel
   ```
2. **Import project**  
   ‚Ä¢ Dashboard ‚Üí ‚ÄúAdd New ‚Üí Project‚Äù ‚Üí pick `IKIGAI`.  
   ‚Ä¢ Framework = **Other**.  
3. **Set Environment Variables**  
   Paste the table above into *Settings ‚Üí Environment Variables* (Production + Preview).  
4. **Build & Deploy**  
   Vercel auto-detects `vercel.json` ‚ûú creates a Node Serverless Function for `/api/*` and serves `/public/*` as static.  
5. **Access URL**  
   `https://ikigai-x-one.vercel.app` ‚Üí Browser prompts for Basic Auth ‚Üí enjoy!

### Custom Domain
```
vercel domains add ikigai.example.com
vercel certs add ikigai.example.com
```
DNS `CNAME` ‚Üí `cname.vercel-dns.com`.

---

## Option B ‚Äî Netlify (Functions)

Netlify can run Express via its *Edge Functions* wrapper.

1. **Create Site** ‚Üí ‚ÄúImport from Git‚Äù.  
2. **Build Command**: `npm run build` _(none defined, so leave blank)_.  
3. **Publish Directory**: `public`  
4. **Netlify Toml** (already auto-generated by wrapper inside `vercel.json`, but add quickly if missing):
   ```toml
   [build]
     functions = "netlify/functions"

   [[redirects]]
     from = "/api/*"
     to   = "/.netlify/functions/api"
     status = 200
   ```
5. **Create Function**  
   Copy `server/api.js` ‚ûú `netlify/functions/api.js`. Add:  
   ```js
   const server = require('../../server/api'); // export handler
   exports.handler = server;
   ```
6. **Environment Variables** ‚Üí ‚ÄúSite settings ‚Üí Environment‚Äù.  
7. **Deploy** ‚Üí done.

_Tip: Netlify‚Äôs free tier includes automatic TLS and global CDN._

---

## Option C ‚Äî Railway (Docker-less)

1. **Login** ‚Üí `railway login`  
2. **Initialize**:  
   ```bash
   railway init
   railway link # choose project
   ```  
3. Railway detects `package.json` ‚ûú sets **Start Command** `node server/api.js`.  
4. **Variables** ‚Üí ‚ÄúEnvironment‚Äù tab ‚Üí add keys.  
5. **Deploy** (push triggers build).  
6. Production URL like `https://ikigai-production.up.railway.app`.

---

## Option D ‚Äî Render (Web Service)

1. **New ‚Üí Web Service** ‚Üí connect GitHub repo.  
2. **Environment**: `Node`.  
3. **Build Command**: `npm ci`  
4. **Start Command**: `node server/api.js`  
5. **Root Directory**: `.`  
6. **Add Environment Vars** in ‚ÄúSettings ‚Üí Environment‚Äù.  
7. **Free Plan** (auto-sleep) or paid for always-on.  
8. Render autoprovisions TLS at `https://ikigai.onrender.com`.

---

## Option E ‚Äî Manual VPS (PM2 + Nginx)

For completeness; see `README.md` ‚ÄúProduction Deployment‚Äù.

---

## Post-Deploy Checklist ‚úîÔ∏è

1. Visit the URL ‚Äì Basic Auth prompt appears.  
2. Log in ‚Üí Aurora background + Ikigai sphere renders.  
3. Complete questionnaire ‚Üí within 10 s receive statement, habits, and hero image.  
4. **Lighthouse** ‚â• 90/95 mobile.  
5. Refresh page ‚Üí cached result loads instantly.

Enjoy gifting a personalised Ikigai journey! üéÅ

.

No other files.